@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Cyberpunk Theme Colors (Base Definitions) */
    --cyberpunk-bg: 260 30% 5%; /* Very dark desaturated purple */
    --cyberpunk-bg-lighter: 260 30% 10%; /* Slightly lighter for surfaces */
    --cyberpunk-foreground: 210 100% 90%; /* Pale cyan/white */
    --cyberpunk-primary-accent: 320 100% 55%; /* Neon Pink/Magenta */
    --cyberpunk-secondary-accent: 180 100% 50%; /* Electric Cyan */
    --cyberpunk-highlight: 50 100% 55%; /* Bright Yellow/Gold */
    --cyberpunk-border: 320 100% 45%; /* Darker pink for primary borders */
    --cyberpunk-border-secondary: 180 100% 40%; /* Darker cyan for secondary borders */
    --cyberpunk-muted-foreground: 210 30% 60%; /* Muted cyan */
    --cyberpunk-destructive: 0 85% 50%; /* Vivid Red */
    --cyberpunk-destructive-foreground: 210 100% 95%; /* Very light, almost white */

    /* Mapping to Standard Theme Variables */
    --background: var(--cyberpunk-bg);
    --foreground: var(--cyberpunk-foreground);

    --card: var(--cyberpunk-bg-lighter);
    --card-foreground: var(--cyberpunk-foreground);

    --popover: var(--cyberpunk-bg-lighter);
    --popover-foreground: var(--cyberpunk-foreground);

    --primary: var(--cyberpunk-primary-accent);
    --primary-foreground: var(--cyberpunk-bg); /* High contrast for text on primary */

    --secondary: var(--cyberpunk-secondary-accent);
    --secondary-foreground: var(--cyberpunk-bg); /* High contrast for text on secondary */

    --muted: var(--cyberpunk-bg-lighter); /* For less emphasis surfaces */
    --muted-foreground: var(--cyberpunk-muted-foreground);

    --accent: var(--cyberpunk-highlight);
    --accent-foreground: var(--cyberpunk-bg);

    --destructive: var(--cyberpunk-destructive);
    --destructive-foreground: var(--cyberpunk-destructive-foreground);

    --border: var(--cyberpunk-border);
    --input: var(--cyberpunk-border-secondary); /* For input borders */
    --ring: var(--cyberpunk-highlight); /* For focus rings */

    --radius: 0rem; /* Sharp corners for pixelated look */

    /* Chart colors */
    --chart-1: var(--cyberpunk-primary-accent);
    --chart-2: var(--cyberpunk-secondary-accent);
    --chart-3: var(--cyberpunk-highlight);
    --chart-4: 288 62% 50%; /* A cyberpunk-compatible purple */
    --chart-5: var(--cyberpunk-destructive);

    /* Sidebar colors - mapped to cyberpunk theme */
    --sidebar-background: 260 30% 8%; /* Slightly different dark for sidebar */
    --sidebar-foreground: var(--cyberpunk-foreground);
    --sidebar-primary: var(--cyberpunk-primary-accent);
    --sidebar-primary-foreground: var(--cyberpunk-bg);
    --sidebar-accent: var(--cyberpunk-highlight);
    --sidebar-accent-foreground: var(--cyberpunk-bg);
    --sidebar-border: var(--cyberpunk-border);
    --sidebar-ring: var(--cyberpunk-highlight);
  }

  /* Remove .dark mode overrides as cyberpunk is inherently dark */
  /* .dark { ... } block removed */
}

@layer base {
  * {
    @apply border-border; /* Uses the new --border which is var(--cyberpunk-border) */
  }
  body {
    @apply bg-background text-foreground; /* Uses new cyberpunk bg/fg */
  }
  img {
    image-rendering: pixelated; /* Ideal for pixel art scaling */
    image-rendering: -moz-crisp-edges; /* Firefox */
    image-rendering: -webkit-optimize-contrast; /* Webkit (Chrome, Safari) for sharper edges */
    image-rendering: crisp-edges; /* General fallback */
    -ms-interpolation-mode: nearest-neighbor; /* IE */
  }
  /* Ensure inputs use the cyberpunk background for their content area */
  input, textarea, select {
    @apply bg-background; /* or var(--cyberpunk-bg-lighter) if bg-background is too dark for inputs */
  }
}

/* Cyberpunk specific component styles (can be opt-in via classes) */
@layer components {
  .cyberpunk-alert-dialog-content {
    @apply bg-[hsl(var(--cyberpunk-bg-lighter))] border-[hsl(var(--cyberpunk-border))] shadow-xl shadow-[hsl(var(--cyberpunk-primary-accent)/0.3)];
  }
  .cyberpunk-alert-dialog-title {
    @apply text-[hsl(var(--cyberpunk-primary-accent))] font-bold;
  }
  .cyberpunk-alert-dialog-description {
    @apply text-[hsl(var(--cyberpunk-muted-foreground))];
  }
  .cyberpunk-button-primary {
    @apply bg-transparent border border-[hsl(var(--cyberpunk-primary-accent))] text-[hsl(var(--cyberpunk-primary-accent))] hover:bg-[hsl(var(--cyberpunk-primary-accent)/0.2)] hover:text-[hsl(var(--cyberpunk-highlight))];
  }
   .cyberpunk-button-primary:focus-visible {
    @apply ring-2 ring-offset-2 ring-[hsl(var(--cyberpunk-primary-accent))] ring-offset-[hsl(var(--cyberpunk-bg-lighter))];
  }
  .cyberpunk-button-secondary {
    @apply bg-transparent border border-[hsl(var(--cyberpunk-secondary-accent))] text-[hsl(var(--cyberpunk-secondary-accent))] hover:bg-[hsl(var(--cyberpunk-secondary-accent)/0.2)] hover:text-[hsl(var(--cyberpunk-highlight))];
  }
  .cyberpunk-button-secondary:focus-visible {
    @apply ring-2 ring-offset-2 ring-[hsl(var(--cyberpunk-secondary-accent))] ring-offset-[hsl(var(--cyberpunk-bg-lighter))];
  }
  .cyberpunk-button-cancel {
    @apply bg-transparent border border-[hsl(var(--cyberpunk-muted-foreground))] text-[hsl(var(--cyberpunk-muted-foreground))] hover:bg-[hsl(var(--cyberpunk-muted-foreground)/0.2)] hover:text-[hsl(var(--cyberpunk-foreground))];
  }
   .cyberpunk-button-cancel:focus-visible {
    @apply ring-2 ring-offset-2 ring-[hsl(var(--cyberpunk-muted-foreground))] ring-offset-[hsl(var(--cyberpunk-bg-lighter))];
  }
}

@layer utilities {
  .player-overlay-cyberpixel-bg {
    --cp-pixel-size: 30px; /* Control "pixel" block size */
    background-color: hsl(var(--cyberpunk-bg)); /* Dark base */
    background-image:
      repeating-conic-gradient(
        hsla(var(--cyberpunk-primary-accent), 0.25) 0% 25%,
        hsla(var(--cyberpunk-secondary-accent), 0.25) 25% 50%,
        hsla(var(--cyberpunk-highlight), 0.2) 50% 75%,
        hsla(var(--cyberpunk-bg-lighter), 0.2) 75% 100%
      );
    background-size: var(--cp-pixel-size) var(--cp-pixel-size);
  }
}
